(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0xua":function(t,e,i){"use strict";var n=i("VTBJ"),a=i("HaE+"),r=(i("ls82"),i("DQNa"),i("fBUP")),s=i("p46w"),l=i.n(s),c={props:{article:{type:Object,require:!0,default:{updated_at:"",published_at:"",content:""}},isEdit:!1},data:function(){return{isFullScreeen:!1}},watch:{isFullScreeen:function(t){var e=this;this.isEdit&&t&&this.$nextTick((function(){var t=e.$refs.textnode;if(t){var i=t.$refs.textarea,n=void 0===i?void 0:i;if(n){var a=e.$refs.mdnode;e.addScrollListen(n,a)}}}))},isEdit:function(t){t||this.onPublish()}},computed:{},methods:{date:function(t){return new Date(t).toLocaleDateString()},mdToHtml:function(t){return r.b.mdToHtml(t)},onFullScreen:function(){this.isFullScreeen=!this.isFullScreeen},onPublish:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){var i,a,s,c,o,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.a.strapiCreateBlog+"/"+t.article.id,a=l.a.get("login"),s=JSON.parse(a),c=s.id,o=s.username,s.token,u=Object(n.a)({user:{id:c,username:o}},t.article),console.log("publish Data:",u),e.prev=5,e.next=8,Object(r.c)({method:"PUT",url:i,data:u});case 8:(d=e.sent)&&d.data&&d.data.id&&d.data.content&&t.$message({message:"更新成功~",type:"info"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t.$message({message:"可能是网络问题，导致更新文章失败；请稍后再试~~",type:"error"});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))()},addScrollListen:function(t,e){t.addEventListener("scroll",(function(t){var i=t.target.scrollTop,n=t.target.scrollHeight,a=e.scrollHeight;e.scrollTop=i/n*a}))}},mounted:function(){}},o=i("KHd+"),u=Object(o.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article"},[i("div",{staticClass:"markdown-title"},[i("div",{staticClass:"title"},[t._v("\n            "+t._s(t.article.title)+"\n        ")]),i("el-divider"),i("div",{staticClass:"time"},[i("div",{staticClass:"updated"},[t._v("更新时间："+t._s(t.date(t.article.updated_at)))]),i("div",{staticClass:"published"},[t._v("发布时间："+t._s(t.date(t.article.published_at)))])])],1),i("div",{staticClass:"markdown-cnt",class:t.isFullScreeen?"full":""},[t.isEdit?i("div",{staticClass:"btns"},[i("el-button",{staticClass:"full-btn",attrs:{title:"全屏",icon:"el-icon-full-screen"},on:{click:t.onFullScreen}},[t._v("全屏预览")])],1):t._e(),i("div",{staticClass:"cnt"},[t.isEdit?i("el-input",{ref:"textnode",staticClass:"markdown-input",attrs:{type:"textarea",rows:16,placeholder:"请在此输入文章内容..."},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}}):t._e(),!t.isEdit||t.isFullScreeen?i("div",{directives:[{name:"g-image",rawName:"v-g-image"}],ref:"mdnode",staticClass:"markdown-here-wrapper",domProps:{innerHTML:t._s(t.mdToHtml(t.article.content))}}):t._e()],1)])])}),[],!1,null,null,null);e.a=u.exports},DQNa:function(t,e,i){var n=i("busE"),a=Date.prototype,r=a.toString,s=a.getTime;new Date(NaN)+""!="Invalid Date"&&n(a,"toString",(function(){var t=s.call(this);return t==t?r.call(this):"Invalid Date"}))},TeQF:function(t,e,i){"use strict";var n=i("I+eb"),a=i("tycR").filter;n({target:"Array",proto:!0,forced:!i("Hd5f")("filter")},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},w718:function(t,e,i){"use strict";i.r(e);i("DQNa"),i("TeQF"),i("QWBl"),i("FZtP");var n=i("fBUP"),a={props:{isEdit:!1},methods:{unixTime:function(t){return new Date(t).getTime()}},components:{Article:i("0xua").a},computed:{article:function(){var t=this,e=n.b.user().username,i=this.$page.data.edges.filter((function(t){return t.node.user.username===e}));console.log("new blogs:",i);var a=i[0];return i.forEach((function(e){var i=t.unixTime(e.node.updated_at);a=i>t.unixTime(a.node.updated_at)?e:a})),a?a&&a.node:(this.$message({message:"请输入正确的url~~",type:"error"}),void("undefined"!=typeof location&&(location.href=location.origin+"/new?username=ymcdhr")))}}},r=i("KHd+"),s=null,l=Object(r.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return this.article?e("Article",{attrs:{article:this.article,isEdit:this.isEdit}}):this._e()}),[],!1,null,null,null);"function"==typeof s&&s(l);e.default=l.exports}}]);